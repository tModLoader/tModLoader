<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Terraria ModLoader: /home/travis/build/tModLoader/tModLoader/patches/tModLoader/Terraria.ModLoader/WaterStyleLoader.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="tModLoaderIcon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Terraria ModLoader
   &#160;<span id="projectnumber">0.11.8.1</span>
   </div>
   <div id="projectbrief">A mod to make and play Terraria mods</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_water_style_loader_8cs_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">WaterStyleLoader.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_water_style_loader_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">using</span> Microsoft.Xna.Framework.Graphics;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_system.html">System</a>.Collections.Generic;</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">using</span> <a class="code" href="namespace_terraria.html">Terraria</a>.GameContent.Liquid;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_terraria.html">Terraria</a>.ModLoader</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;{</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;    <span class="comment">//todo: further documentation</span></div><div class="line"><a name="l00012"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html">   12</a></span>&#160;<span class="comment"></span>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html">WaterStyleLoader</a></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    {</div><div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a6cafc0f3b8897ca3f0db7a5534bf8b98">   17</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">const</span> <span class="keywordtype">int</span> vanillaWaterCount = Main.maxLiquidTypes;</div><div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a9cc8a1e5ffdf29d8a14b82a080c573fe">   18</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">int</span> nextWaterStyle = vanillaWaterCount;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        <span class="keyword">internal</span> <span class="keyword">static</span> readonly IList&lt;ModWaterStyle&gt; waterStyles = <span class="keyword">new</span> List&lt;ModWaterStyle&gt;();</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a5041de98d67f19fc02f79faa66b56791">   24</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> WaterStyleCount =&gt; nextWaterStyle;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">int</span> ReserveStyle() {</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;            <span class="keywordtype">int</span> reserve = nextWaterStyle;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;            nextWaterStyle++;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;            <span class="keywordflow">return</span> reserve;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        }</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a0778cff18767e911698a313f1b7d2f94">   35</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html">ModWaterStyle</a> <a class="code" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a0778cff18767e911698a313f1b7d2f94">GetWaterStyle</a>(<span class="keywordtype">int</span> style) {</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;            <span class="keywordflow">if</span> (style &lt; vanillaWaterCount || style &gt;= nextWaterStyle) {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            }</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <span class="keywordflow">return</span> waterStyles[style - vanillaWaterCount];</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        }</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">void</span> ResizeArrays() {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            Array.Resize(ref LiquidRenderer.Instance._liquidTextures, nextWaterStyle);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            Array.Resize(ref Main.liquidAlpha, nextWaterStyle);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            Array.Resize(ref Main.liquidTexture, nextWaterStyle);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        }</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Unload() {</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            nextWaterStyle = vanillaWaterCount;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;            waterStyles.Clear();</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        }</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a306112e44bb7c3dd458ebf3e9b65e370">   53</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a306112e44bb7c3dd458ebf3e9b65e370">ChooseWaterStyle</a>(ref <span class="keywordtype">int</span> style) {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html">ModWaterStyle</a> waterStyle <span class="keywordflow">in</span> waterStyles) {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                <span class="keywordflow">if</span> (waterStyle.<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#a6ca032617b6b72bd0382919b2bfca430">ChooseWaterStyle</a>()) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                    style = waterStyle.<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#a1f4e85b702b3aeffc71f7ab3bc11f431">Type</a>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                }</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <a class="code" href="class_terraria_1_1_mod_loader_1_1_world_hooks.html">WorldHooks</a>.<a class="code" href="class_terraria_1_1_mod_loader_1_1_world_hooks.html#aea14ab9f4f7eb78bc10e93acfe8e895b">ChooseWaterStyle</a>(ref style);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        }</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a7e0e9255a67a515b6ade9d4b320ee2a6">   62</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a7e0e9255a67a515b6ade9d4b320ee2a6">UpdateLiquidAlphas</a>() {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <span class="keywordflow">if</span> (Main.waterStyle &gt;= vanillaWaterCount) {</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = 0; k &lt; vanillaWaterCount; k++) {</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                    <span class="keywordflow">if</span> (k == 1 || k == 11) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                    }</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                    Main.liquidAlpha[k] -= 0.2f;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                    <span class="keywordflow">if</span> (Main.liquidAlpha[k] &lt; 0f) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                        Main.liquidAlpha[k] = 0f;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                    }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html">ModWaterStyle</a> waterStyle <span class="keywordflow">in</span> waterStyles) {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <span class="keywordtype">int</span> type = waterStyle.<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#a1f4e85b702b3aeffc71f7ab3bc11f431">Type</a>;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <span class="keywordflow">if</span> (Main.waterStyle == type) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                    Main.liquidAlpha[type] += 0.2f;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                    <span class="keywordflow">if</span> (Main.liquidAlpha[type] &gt; 1f) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                        Main.liquidAlpha[type] = 1f;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                    }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <span class="keywordflow">else</span> {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                    Main.liquidAlpha[type] -= 0.2f;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                    <span class="keywordflow">if</span> (Main.liquidAlpha[type] &lt; 0f) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                        Main.liquidAlpha[type] = 0f;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                    }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a9e748b82577bf0c04ce79a176aac448a">   91</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a9e748b82577bf0c04ce79a176aac448a">DrawWatersToScreen</a>(<span class="keywordtype">bool</span> bg) {</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> k = vanillaWaterCount; k &lt; nextWaterStyle; k++) {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <span class="keywordflow">if</span> (Main.liquidAlpha[k] &gt; 0f) {</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                    <span class="keywordflow">if</span> (bg) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                        <span class="keywordflow">if</span> (Main.waterStyle &lt; k) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                            Main.instance.DrawWater(bg, k, Main.liquidAlpha[k]);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                        }</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                        <span class="keywordflow">else</span> {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                            Main.instance.DrawWater(bg, k, 1f);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                        }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                    }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                    <span class="keywordflow">else</span> {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                        Main.instance.DrawWater(bg, k, Main.liquidAlpha[k]);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                    }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a39d4686e9e17250226365e6f550ef518">  109</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a39d4686e9e17250226365e6f550ef518">DrawWaterfall</a>(WaterfallManager waterfallManager, SpriteBatch spriteBatch) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html">ModWaterStyle</a> waterStyle <span class="keywordflow">in</span> waterStyles) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">if</span> (Main.liquidAlpha[waterStyle.<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#a1f4e85b702b3aeffc71f7ab3bc11f431">Type</a>] &gt; 0f) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    waterfallManager.DrawWaterfall(spriteBatch, waterStyle.<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#ab32a21465ad930bd6d3ff7ff42d54efb">ChooseWaterfallStyle</a>(),</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                        Main.liquidAlpha[waterStyle.<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#a1f4e85b702b3aeffc71f7ab3bc11f431">Type</a>]);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a0b6eb675c13f9315c1990f98544551ab">  118</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a0b6eb675c13f9315c1990f98544551ab">LightColorMultiplier</a>(<span class="keywordtype">int</span> style, ref <span class="keywordtype">float</span> r, ref <span class="keywordtype">float</span> g, ref <span class="keywordtype">float</span> b) {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html">ModWaterStyle</a> waterStyle = GetWaterStyle(style);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">if</span> (waterStyle != null) {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                waterStyle.<a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#af29875155b7c2c0c754676f06912e526">LightColorMultiplier</a>(ref r, ref g, ref b);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                r *= Lighting.negLight * Lighting.blueWave;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                g *= Lighting.negLight * Lighting.blueWave;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                b *= Lighting.negLight * Lighting.blueWave;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader.html">  129</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class </span><a class="code" href="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader.html">WaterfallStyleLoader</a></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    {</div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader.html#a2011ff3a776e3d43c7fa6fdb7da4ac75">  131</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">const</span> <span class="keywordtype">int</span> vanillaWaterfallCount = WaterfallManager.maxTypes;</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader.html#a8a2e4e46736ff0e0702a5edff0c2a56d">  132</a></span>&#160;        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keywordtype">int</span> nextWaterfallStyle = vanillaWaterfallCount;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keyword">internal</span> <span class="keyword">static</span> readonly IList&lt;ModWaterfallStyle&gt; waterfallStyles = <span class="keyword">new</span> List&lt;ModWaterfallStyle&gt;();</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">int</span> ReserveStyle() {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordtype">int</span> reserve = nextWaterfallStyle;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            nextWaterfallStyle++;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keywordflow">return</span> reserve;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader.html#a896b0437728b98a317aa2ca7da5a4af3">  144</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code" href="class_terraria_1_1_mod_loader_1_1_mod_waterfall_style.html">ModWaterfallStyle</a> <a class="code" href="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader.html#a896b0437728b98a317aa2ca7da5a4af3">GetWaterfallStyle</a>(<span class="keywordtype">int</span> style) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keywordflow">if</span> (style &lt; vanillaWaterfallCount || style &gt;= nextWaterfallStyle) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="keywordflow">return</span> null;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">return</span> waterfallStyles[style - vanillaWaterfallCount];</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">void</span> ResizeArrays() {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            Array.Resize(ref Main.instance.waterfallManager.waterfallTexture, nextWaterfallStyle);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">void</span> Unload() {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            nextWaterfallStyle = vanillaWaterfallCount;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            waterfallStyles.Clear();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="ttc" id="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader_html_a896b0437728b98a317aa2ca7da5a4af3"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader.html#a896b0437728b98a317aa2ca7da5a4af3">Terraria.ModLoader.WaterfallStyleLoader.GetWaterfallStyle</a></div><div class="ttdeci">static ModWaterfallStyle GetWaterfallStyle(int style)</div><div class="ttdoc">Returns the ModWaterfallStyle with the given ID. </div><div class="ttdef"><b>Definition:</b> <a href="_water_style_loader_8cs_source.html#l00144">WaterStyleLoader.cs:144</a></div></div>
<div class="ttc" id="namespace_system_html"><div class="ttname"><a href="namespace_system.html">System</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_water_style_loader_html_a0b6eb675c13f9315c1990f98544551ab"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a0b6eb675c13f9315c1990f98544551ab">Terraria.ModLoader.WaterStyleLoader.LightColorMultiplier</a></div><div class="ttdeci">static void LightColorMultiplier(int style, ref float r, ref float g, ref float b)</div><div class="ttdef"><b>Definition:</b> <a href="_water_style_loader_8cs_source.html#l00118">WaterStyleLoader.cs:118</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_water_style_loader_html_a9e748b82577bf0c04ce79a176aac448a"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a9e748b82577bf0c04ce79a176aac448a">Terraria.ModLoader.WaterStyleLoader.DrawWatersToScreen</a></div><div class="ttdeci">static void DrawWatersToScreen(bool bg)</div><div class="ttdef"><b>Definition:</b> <a href="_water_style_loader_8cs_source.html#l00091">WaterStyleLoader.cs:91</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader_html"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_waterfall_style_loader.html">Terraria.ModLoader.WaterfallStyleLoader</a></div><div class="ttdef"><b>Definition:</b> <a href="_water_style_loader_8cs_source.html#l00129">WaterStyleLoader.cs:129</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_world_hooks_html"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_world_hooks.html">Terraria.ModLoader.WorldHooks</a></div><div class="ttdoc">This is where all ModWorld hooks are gathered and called. </div><div class="ttdef"><b>Definition:</b> <a href="_world_hooks_8cs_source.html#l00012">WorldHooks.cs:12</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_mod_water_style_html"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html">Terraria.ModLoader.ModWaterStyle</a></div><div class="ttdoc">Represents a style of water that gets drawn, based on factors such as the background. This is used to determine the color of the water, as well as other things as determined by the hooks below. </div><div class="ttdef"><b>Definition:</b> <a href="_mod_water_style_8cs_source.html#l00008">ModWaterStyle.cs:8</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_mod_water_style_html_af29875155b7c2c0c754676f06912e526"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#af29875155b7c2c0c754676f06912e526">Terraria.ModLoader.ModWaterStyle.LightColorMultiplier</a></div><div class="ttdeci">virtual void LightColorMultiplier(ref float r, ref float g, ref float b)</div><div class="ttdoc">Allows you to modify the light levels of the tiles behind the water. The light color components will ...</div><div class="ttdef"><b>Definition:</b> <a href="_mod_water_style_8cs_source.html#l00069">ModWaterStyle.cs:69</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_water_style_loader_html_a306112e44bb7c3dd458ebf3e9b65e370"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a306112e44bb7c3dd458ebf3e9b65e370">Terraria.ModLoader.WaterStyleLoader.ChooseWaterStyle</a></div><div class="ttdeci">static void ChooseWaterStyle(ref int style)</div><div class="ttdef"><b>Definition:</b> <a href="_water_style_loader_8cs_source.html#l00053">WaterStyleLoader.cs:53</a></div></div>
<div class="ttc" id="namespace_terraria_html"><div class="ttname"><a href="namespace_terraria.html">Terraria</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_mod_water_style_html_ab32a21465ad930bd6d3ff7ff42d54efb"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#ab32a21465ad930bd6d3ff7ff42d54efb">Terraria.ModLoader.ModWaterStyle.ChooseWaterfallStyle</a></div><div class="ttdeci">abstract int ChooseWaterfallStyle()</div><div class="ttdoc">The ID of the waterfall style the game should use when this water style is in use. </div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_mod_waterfall_style_html"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_mod_waterfall_style.html">Terraria.ModLoader.ModWaterfallStyle</a></div><div class="ttdoc">Represents a style of waterfalls that gets drawn. This is mostly used to determine the color of the w...</div><div class="ttdef"><b>Definition:</b> <a href="_mod_water_style_8cs_source.html#l00086">ModWaterStyle.cs:86</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_water_style_loader_html_a7e0e9255a67a515b6ade9d4b320ee2a6"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a7e0e9255a67a515b6ade9d4b320ee2a6">Terraria.ModLoader.WaterStyleLoader.UpdateLiquidAlphas</a></div><div class="ttdeci">static void UpdateLiquidAlphas()</div><div class="ttdef"><b>Definition:</b> <a href="_water_style_loader_8cs_source.html#l00062">WaterStyleLoader.cs:62</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_water_style_loader_html"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html">Terraria.ModLoader.WaterStyleLoader</a></div><div class="ttdoc">This serves as the central class from which WaterStyle functions are supported and carried out...</div><div class="ttdef"><b>Definition:</b> <a href="_water_style_loader_8cs_source.html#l00012">WaterStyleLoader.cs:12</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_water_style_loader_html_a39d4686e9e17250226365e6f550ef518"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a39d4686e9e17250226365e6f550ef518">Terraria.ModLoader.WaterStyleLoader.DrawWaterfall</a></div><div class="ttdeci">static void DrawWaterfall(WaterfallManager waterfallManager, SpriteBatch spriteBatch)</div><div class="ttdef"><b>Definition:</b> <a href="_water_style_loader_8cs_source.html#l00109">WaterStyleLoader.cs:109</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_mod_water_style_html_a6ca032617b6b72bd0382919b2bfca430"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#a6ca032617b6b72bd0382919b2bfca430">Terraria.ModLoader.ModWaterStyle.ChooseWaterStyle</a></div><div class="ttdeci">virtual bool ChooseWaterStyle()</div><div class="ttdoc">Whether the conditions have been met for this water style to be used. Typically Main.bgStyle is checked to determine whether a water style should be used. Returns false by default. </div><div class="ttdef"><b>Definition:</b> <a href="_mod_water_style_8cs_source.html#l00047">ModWaterStyle.cs:47</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_world_hooks_html_aea14ab9f4f7eb78bc10e93acfe8e895b"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_world_hooks.html#aea14ab9f4f7eb78bc10e93acfe8e895b">Terraria.ModLoader.WorldHooks.ChooseWaterStyle</a></div><div class="ttdeci">static void ChooseWaterStyle(ref int style)</div><div class="ttdef"><b>Definition:</b> <a href="_world_hooks_8cs_source.html#l00092">WorldHooks.cs:92</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_water_style_loader_html_a0778cff18767e911698a313f1b7d2f94"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_water_style_loader.html#a0778cff18767e911698a313f1b7d2f94">Terraria.ModLoader.WaterStyleLoader.GetWaterStyle</a></div><div class="ttdeci">static ModWaterStyle GetWaterStyle(int style)</div><div class="ttdoc">Returns the ModWaterStyle with the given ID. </div><div class="ttdef"><b>Definition:</b> <a href="_water_style_loader_8cs_source.html#l00035">WaterStyleLoader.cs:35</a></div></div>
<div class="ttc" id="class_terraria_1_1_mod_loader_1_1_mod_water_style_html_a1f4e85b702b3aeffc71f7ab3bc11f431"><div class="ttname"><a href="class_terraria_1_1_mod_loader_1_1_mod_water_style.html#a1f4e85b702b3aeffc71f7ab3bc11f431">Terraria.ModLoader.ModWaterStyle.Type</a></div><div class="ttdeci">int Type</div><div class="ttdoc">The ID of the water style. </div><div class="ttdef"><b>Definition:</b> <a href="_mod_water_style_8cs_source.html#l00029">ModWaterStyle.cs:29</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b2dee0249ca1c6e98736e679cc6a5269.html">patches</a></li><li class="navelem"><a class="el" href="dir_33550c180f9cedd6db1017f362610614.html">tModLoader</a></li><li class="navelem"><a class="el" href="dir_563615b9ae08cf63712a5de713529dc7.html">Terraria.ModLoader</a></li><li class="navelem"><a class="el" href="_water_style_loader_8cs.html">WaterStyleLoader.cs</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
