--- src/TerrariaNetCore/Terraria/GameContent/UI/ResourceSets/PlayerStatsSnapshot.cs
+++ src/tModLoader/Terraria/GameContent/UI/ResourceSets/PlayerStatsSnapshot.cs
@@ -1,3 +_,5 @@
+using Terraria.ModLoader;
+
 namespace Terraria.GameContent.UI.ResourceSets
 {
 	public struct PlayerStatsSnapshot
@@ -5,32 +_,60 @@
 		public int Life;
 		public int LifeMax;
 		public int LifeFruitCount;
-		public float LifePerSegment;
+		// Made double to prevent bugs caused by precision limits (#HealthManaAPI)
+		public double LifePerSegment => LifeMax / (double)AmountOfLifeHearts;
 		public int Mana;
 		public int ManaMax;
-		public float ManaPerSegment;
+		// Made double to prevent bugs caused by precision limits (#HealthManaAPI)
+		public double ManaPerSegment => ManaMax / (double)AmountOfManaStars;
+
+		private int numLifeHearts;
+
+		/// <summary>
+		/// How many life hearts should be drawn
+		/// </summary>
+		public int AmountOfLifeHearts {
+			get => numLifeHearts;
+			set => numLifeHearts = Utils.Clamp(value, int.MinValue, 20);
+		}
+
+		private int numManaStars;
+
+		/// <summary>
+		/// How many mana stars should be drawn
+		/// </summary>
+		public int AmountOfManaStars {
+			get => numManaStars;
+			set => numManaStars = Utils.Clamp(value, int.MinValue, 20);
+		}
 
 		public PlayerStatsSnapshot(Player player) {
 			Life = player.statLife;
 			Mana = player.statMana;
 			LifeMax = player.statLifeMax2;
 			ManaMax = player.statManaMax2;
-			float num = 20f;
+			double num = 20d;
 			int num2 = player.statLifeMax / 20;
-			int num3 = (player.statLifeMax - 400) / 5;
+			int num3 = player.ConsumedLifeFruit;
 			if (num3 < 0)
 				num3 = 0;
 
 			if (num3 > 0) {
 				num2 = player.statLifeMax / (20 + num3 / 4);
-				num = (float)player.statLifeMax / 20f;
+				num = player.statLifeMax / 20d;
 			}
 
 			int num4 = player.statLifeMax2 - player.statLifeMax;
-			num += (float)(num4 / num2);
+			num += num4 / num2;
 			LifeFruitCount = num3;
+			/*
 			LifePerSegment = num;
 			ManaPerSegment = 20f;
+			*/
+			numLifeHearts = (int)(LifeMax / num);
+			numManaStars = (int)(ManaMax / 20d);
+
+			SystemLoader.ModifyStatSnapshot(player, ref this);
 		}
 	}
 }
